{"version":3,"file":"deGaulle.umd.js","sources":["../src/index.js"],"sourcesContent":["//\n//\n//\nconst nomnom = require('@gerhobbelt/nomnom');\n\nconst MarkDown = require('@gerhobbelt/markdown-it');\n\nconst mdPluginCollective = require('markdown-it-dirty-dozen');\n\nconst pkg = require('../package.json');\n\nconst glob = require('@gerhobbelt/glob');\nconst gitignoreParser = require('@gerhobbelt/gitignore-parser');\nconst assert = require('assert');\nconst _ = require('lodash');\n\nconst path = require('path');\nconst fs = require('fs');\n\nconst DEBUG = false;\n\n\nconst config = {\n  docTreeBasedir: null,\n  destinationPath: null\n};\n\nnomnom.script('deGaulle');\n\nnomnom\n  .command('build')\n  .option('debug', {\n    abbr: 'd',\n    flag: true,\n    help: 'Print debugging info'\n  })\n  .option('config', {\n    abbr: 'c',\n    'default': 'config.json',\n    help: 'JSON file with tests to run'\n  })\n  .callback(function (opts, cmd) {\n    try {\n      buildWebsite(opts, cmd);\n    } catch (ex) {\n      console.error(`ERROR: ${ex.message}\\n\\nException:\\n${ex}`);\n      process.exit(5);\n    }\n  })\n  .help('build website from sources');\n\nnomnom\n  .command('sanity')\n  .option('debug', {\n    abbr: 'd',\n    flag: true,\n    help: 'Print debugging info'\n  })\n  .option('config', {\n    abbr: 'c',\n    'default': 'config.json',\n    help: 'JSON file with tests to run'\n  })\n  .option('outfile', {\n    abbr: 'o',\n    help: 'file to write results to'\n  })\n  .callback(function (\n    opts\n    /* , cmd */\n  ) {\n    try {\n      sanityCheck(opts);\n    } catch (ex) {\n      console.error(`ERROR: ${ex.message}\\n\\nException:\\n${ex}`);\n      process.exit(5);\n    }\n  })\n  .help('run the sanity tests');\n\nnomnom\n  .nocommand()\n  .option('debug', {\n    abbr: 'd',\n    flag: true,\n    help: 'Print debugging info'\n  })\n  .option('config', {\n    abbr: 'c',\n    'default': 'config.json',\n    help: 'JSON file with tests to run'\n  })\n  .option('version', {\n    flag: true,\n    help: 'print version and exit',\n    callback: function () {\n      return `version ${pkg.version}`;\n    }\n  })\n  .callback(function (opts, cmd) {\n    try {\n      buildWebsite(opts, cmd);\n    } catch (ex) {\n      console.error(`ERROR: ${ex.message}\\n\\nException:\\n${ex}`);\n      process.exit(5);\n    }\n  });\n\nnomnom.parse();\n\n\n\n// -- done --\n\n\n\nfunction unixify(path) {\n  return path.replace(/\\\\/g, '/');\n}\n\nfunction absSrcPath(rel) {\n  let p = path.join(config.docTreeBasedir, rel);\n  return unixify(path.resolve(p));\n}\n\nfunction absDstPath(rel) {\n  if (!config.destinationPath) {\n    throw new Error('Internal error: used too early');\n  }\n  let p = path.join(config.destinationPath, rel);\n  return unixify(path.resolve(p));\n}\n\nfunction readOptionalTxtConfigFile(rel) {\n  let p = absSrcPath(rel);\n  if (fs.existsSync(p)) {\n    let src = fs.readFileSync(p, 'utf8');\n  // - split into lines\n  // - filter out any lines whicch don't have an '='\n  // - split each line across the initial '=' in there.\n  // - turn this into a hash table?\n    let lines = src.split(/[\\r\\n]/g);\n    lines = lines.filter((l) => l.trim().length > 1 && l.includes('=')).map((l) => {\n      let parts = l.split('=');\n      if (parts.length !== 2) {\n        throw new Error(`config line in ${rel} is expected to have only one '='`);\n      }\n      parts = parts.map((l) => l.trim());\n      return parts;\n    });\n    let rv = {};\n    lines.forEach((l) => {\n      rv[l[0]] = l[1];\n    });\n    return rv;\n  }\n  return {};\n}\n\nfunction myCustomPageNamePostprocessor(spec) {\n  // clean up unwanted characters\n  spec = spec.replace(/ :: /g, '/');\n  spec = spec.replace(/ --+ /g, '/');\n  spec = _.deburr(spec).trim();\n  // normalize case\n  spec = spec.toLowerCase();\n  spec = spec\n      .replace(/[^\\w\\d\\s\\/_-]/g, '_');\n  spec = spec\n      .replace(/__+/g, '_');\n  spec = spec\n      .replace(/\\s+/g, ' ');\n  console.log('myCustomPageNamePostprocessor STAGE 1', spec);\n  spec = spec\n      .replace(/_-_/g, '_');\n  spec = spec\n      .replace(/ - /g, ' ');\n  spec = spec\n      .replace(/[ _]* [ _]*/g, ' ');\n  console.log('myCustomPageNamePostprocessor STAGE 2', spec);\n  spec = spec\n      .replace(/(^|\\/)[ _]+/g, '$1');\n  spec = spec\n      .replace(/[ _]+($|\\/)/g, '$1');\n  console.log('myCustomPageNamePostprocessor STAGE 3', spec);\n  spec = spec\n      .replace(/ /g, '.');\n  console.log('myCustomPageNamePostprocessor STAGE 4', spec);\n\n\n  return spec;\n}\n\nasync function buildWebsite(opts, command) {\n  console.log(\n    `buildWebsite: command: ${command || '<no-command>'}, opts: ${JSON.stringify(\n      opts,\n      null,\n      2\n    )}`\n  );\n  let paths = opts._.slice(command ? 1 : 0);\n  const minPathsCount = 1;\n\n  if (!paths || paths.length < minPathsCount) {\n    throw new Error(\n      'Must specify at least one file path as starting point. None were specified.'\n    );\n  }\n\n  let firstEntryPointPath = paths[0];\n  // make sure we start with an absolute path; everything will derived off this one.\n  if (!path.isAbsolute(firstEntryPointPath)) {\n    firstEntryPointPath = path.join(process.cwd(), firstEntryPointPath);\n  }\n  firstEntryPointPath = path.normalize(firstEntryPointPath);\n  console.log('firstEntryPointPath = ', firstEntryPointPath);\n\n  let entryStats = fs.lstatSync(firstEntryPointPath);\n\n  if (entryStats && entryStats.isDirectory()) {\n    // check if any of the default entry points exist:\n    // - index.md\n    // - index.html\n    // - README.md\n    let indexFile;\n    let indexFilePriority = 0;\n    let scanPath = path.join(firstEntryPointPath, '*.{md,htm,html}');\n    scanPath = unixify(scanPath);\n    console.log('scanPath:', scanPath);\n    let files = glob.sync(scanPath, {\n      nosort: true,\n      nomount: true,\n      nounique: false,\n      nocase: true,     //<-- uncomment this one for total failure to find any files >:-((\n      nodir: true,\n      nobrace: false,\n      gitignore: true\n    });\n    console.log(`root point DIR --> scan: ${JSON.stringify(files, null, 2)}`);\n\n    for (const f of files || []) {\n      switch (path.basename(f.toLowerCase())) {\n      case 'index.md':\n        if (indexFilePriority < 10) {\n          indexFilePriority = 10;\n          indexFile = f;\n        }\n\n        continue;\n\n      case 'index.htm':\n      case 'index.html':\n        if (indexFilePriority < 5) {\n          indexFilePriority = 5;\n          indexFile = f;\n        }\n\n        continue;\n\n      case 'readme.md':\n        if (indexFilePriority < 1) {\n          indexFilePriority = 1;\n          indexFile = f;\n        }\n\n        continue;\n\n      default:\n        continue;\n      }\n    }\n\n    if (indexFile) {\n      firstEntryPointPath = indexFile;\n      entryStats = fs.lstatSync(firstEntryPointPath);\n    } else {\n      throw new Error(\n        `Could not find a default entry point file (index.md, index.html or README.md) in the entry point directory ${firstEntryPointPath} (${scanPath}`\n      );\n    }\n  }\n\n  if (!entryStats) {\n    throw new Error(`entry point does not exist: ${firstEntryPointPath}`);\n  }\n\n  if (!entryStats.isFile()) {\n    throw new Error(`entry point is not a file: ${firstEntryPointPath}`);\n  }\n\n  config.docTreeBasedir = path.dirname(firstEntryPointPath);\n\n\n  let outputDirPath = paths[1] || path.join(config.docTreeBasedir, (!config.docTreeBasedir.endsWith('docs') ? '../docs' : '../' + path.basename(config.docTreeBasedir) + '-output'));\n  // make sure we start with an absolute path; everything will derived off this one.\n  if (!path.isAbsolute(outputDirPath)) {\n    outputDirPath = path.join(process.cwd(), outputDirPath);\n  }\n  outputDirPath = path.normalize(outputDirPath);\n  console.log('outputDirPath = ', outputDirPath);\n  config.destinationPath = outputDirPath;\n\n  config.outputDirRelativePath = unixify(path.relative(config.docTreeBasedir, config.destinationPath));\n\n  console.log('config:', config);\n\n\n  // now scan the entire tree: collect potential files for comparison & treatment\n  //\n  // Produces an array of categories, which each are an array of file records,\n  // where each file record has this format:\n  //\n  // {\n  //   path,        -- full path to file\n  //   nameLC       -- lowercased filename\n  //   ext          -- lowercased filename extension\n  //   relativePath --  relative path to config.docTreeBasedir\n  // }\n  //\n  async function collectAllFiles() {\n    let scanPath = path.join(config.docTreeBasedir, '**/*');\n    scanPath = unixify(scanPath);\n    console.log('scanPath:', scanPath);\n\n    return new Promise((resolve, reject) => {\n      glob(scanPath, {\n        nosort: true,\n        nomount: true,\n        nounique: false,\n        nocase: true,     //<-- uncomment this one for total failure to find any files >:-((\n        nodir: true,\n        nobrace: false,\n        gitignore: true\n      }, function processGlobResults(err, files) {\n        if (err) {\n          reject(new Error(`glob scan error: ${err}`));\n          return;\n        }\n\n        console.log(`root point DIR --> scan: ${JSON.stringify(files, null, 2)}`);\n\n        let rv = {\n          markdown: new Map(),\n          html: new Map(),\n          css: new Map(),\n          js: new Map(),\n          image: new Map(),\n          movie: new Map(),\n          misc: new Map(),\n          _: new Map()\n        };\n        const rv_mapping_def = {\n          markdown: [\n            'md',\n            'markdown'\n          ],\n          html: [\n            'html',\n            'htm'\n          ],\n          js: [\n            'js',\n            'mjs',\n            'ejs',\n            'ts',\n            'coffee'\n          ],\n          css: [\n            'css',\n            'scss',\n            'less',\n            'styl',\n            'stylus'\n          ],\n          image: [\n            'png',\n            'gif',\n            'jpg',\n            'jpeg',\n            'tiff',\n            'bmp',\n            'svg',\n            'psd',\n            'ai'\n          ],\n          movie: [\n            'mkv',\n            'mp4',\n            'avi',\n            'mov',\n            'flv'\n          ]\n        };\n        let rv_mapping = new Map();\n        for (let n in rv_mapping_def) {\n          let a = rv_mapping_def[n];\n          console.log('key n', { n, a });\n          for (let b of a) {\n            console.log('map n -> b', { n, b });\n            rv_mapping.set('.' + b, n);\n          }\n        }\n\n        console.log('######################### mapping ##########################\\n', rv_mapping, '\\n###########################################');\n\n        for (const f of files || []) {\n          let fname = path.basename(f.toLowerCase());\n          let ext = path.extname(fname);\n          let el = {\n            path: f,\n            nameLC: fname,\n            ext: ext,\n            relativePath: unixify(path.relative(config.docTreeBasedir, f))\n          };\n          let cat = rv_mapping.get(ext) || 'misc';\n          rv[cat].set(f, el);\n          rv._.set(f, el);\n        }\n        resolve(rv);\n      });\n    });\n  }\n\n  // async invocation, but don't wait for it yet:\n  let scan = collectAllFiles();\n\n  let md = MarkDown({\n    // Enable HTML tags in source\n    html: true,\n    // Use '/' to close single tags (<br />).\n    xhtmlOut: false,\n    // Convert '\\n' in paragraphs into <br>\n    breaks: false,\n    // CSS language prefix for fenced blocks. Can be useful for external highlighters.\n    langPrefix: 'language-',\n    // Autoconvert URL-like text to links\n    linkify: true,\n    // highSecurity:\n    // - false:           lower protection against XSS/Unicode-Homologue/etc. attacks via the input MarkDown.\n    //                    This setting assumes you own or at least trust the Markdown\n    //                    being fed to MarkDonw-It. The result is a nicer render.\n    // - true (default):  maximum protection against XSS/Unicode-Homologue/etc. attacks via the input MarkDown.\n    //                    This is the default setting and assumes you have no control or absolute trust in the Markdown\n    //                    being fed to MarkDonw-It. Use this setting when using markdown-it as part of a forum or other\n    //                    website where more-or-less arbitrary users can enter and feed any MarkDown to markdown-it.\n    //\n    // See https://en.wikipedia.org/wiki/Internationalized_domain_name for details on homograph attacks, for example.\n    highSecurity: false,\n    // Enable some language-neutral replacement + quotes beautification\n    typographer: true,\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Could be either a String or an Array.\n    //\n    // For example, you can use '«»„“' for Russian, '„“‚‘' for German,\n    // and ['«\\xA0', '\\xA0»', '‹\\xA0', '\\xA0›'] for French (including nbsp).\n    quotes: '“”‘’',\n    // Highlighter function. Should return escaped HTML,\n    // or '' if the source string is not changed and should be escaped externally.\n    // If result starts with <pre... internal wrapper is skipped.\n    highlight: function () /*str, lang*/\n    {\n      console.error('highligh callback invoked!');\n      return '';\n    } // Configure default attributes for given tags\n    //default_attributes: { a: [['rel', 'nofollow']] }\n  });\n\n  // augment the md instance for use with the markdown_it_include plugin:\n  //md.getIncludeRootDir = ...\n\n  console.log('setting up markdown-it:', mdPluginCollective, typeof mdPluginCollective.use_dirty_dozen);\n  mdPluginCollective.use_dirty_dozen(md, {\n    abbr: {\n      abbreviations: readOptionalTxtConfigFile('.deGaulle/abbr-abbreviations.txt'),\n      links:         readOptionalTxtConfigFile('.deGaulle/abbr-links.txt'),\n      emphasis:      readOptionalTxtConfigFile('.deGaulle/abbr-emphasis-phrases.txt')\n    },\n\n    include: {\n      root: '/bogus/',\n      getRootDir: (options, state, startLine, endLine) => state.env.getIncludeRootDir(options, state, startLine, endLine)\n    },\n\n    wikilinks: {\n      postProcessPageName: myCustomPageNamePostprocessor\n    }\n  });\n\n\n  let allFiles = await scan;\n  if (DEBUG)  console.log('!!!!!!!!!!!!!!!! allFiles:', allFiles);\n\n  if (!allFiles.markdown.get(firstEntryPointPath) && !allFiles.html.get(firstEntryPointPath)) {\n    throw new Error(`root file '${firstEntryPointPath}' is supposed to be part of the website`);\n  }\n\n\n\n  console.log(`processing root file: ${firstEntryPointPath}...`);\n  let specRec = await compileMD(firstEntryPointPath, md, allFiles);\n\n  if (DEBUG) console.log('specRec:', specRec);\n\n  // now process the other MD files too:\n  for (let slot of allFiles.markdown) {\n    let key = slot[0];\n    let entry = slot[1];\n    entry.destinationRelPath = myCustomPageNamePostprocessor(entry.relativePath.slice(0, entry.relativePath.length - entry.ext.length));\n    if (DEBUG)     console.log('!!!!!!!!!!!!!!!!!!!!!!!! markdown file record:', entry);\n\n    if (!entry.HtmlContent) {\n      let specRec2 = await compileMD(key, md, allFiles);\n\n      if (DEBUG) console.log('specRec:', specRec2);\n      assert.strictEqual(specRec2, entry);\n    }\n  }\n\n  // now process the HTML files:\n  for (let slot of allFiles.html) {\n    let key = slot[0];\n    let entry = slot[1];\n    entry.destinationRelPath = myCustomPageNamePostprocessor(entry.relativePath.slice(0, entry.relativePath.length - entry.ext.length));\n    if (DEBUG)     console.log('!!!!!!!!!!!!!!!!!!!!!!!! HTML file record:', entry);\n\n    if (!entry.HtmlContent) {\n      let specRec2 = await loadHTML(key, allFiles);\n\n      if (DEBUG) console.log('specRec:', specRec2);\n      assert.strictEqual(specRec2, entry);\n    }\n  }\n\n  // now's the time to match the links in the generated content and do some linkage reporting alongside:\n  //\n\n}\n\n\n\nasync function compileMD(mdPath, md, allFiles) {\n  console.log(`processing file: ${mdPath}...`);\n\n  return new Promise((resolve, reject) => {\n    fs.readFile(\n      mdPath,\n      {\n        encoding: 'utf8'\n      },\n      async (err, data) => {\n        if (err) {\n          reject(new Error(\n            `ERROR: read error ${err} for file ${mdPath}`\n          ));\n          return;\n        }\n\n        let env = {};\n\n        if (DEBUG)          console.log('source:\\n', data);\n\n        // augment the md instance for use with the markdown_it_include plugin:\n        env.getIncludeRootDir = function (options, state, startLine, endLine) {\n          if (DEBUG)          console.log('##### include root dir is today:', { dir: path.dirname(mdPath) });\n          return path.dirname(mdPath);\n        };\n\n        // let content = md.render(data); --> .parse + .renderer.render\n        //\n        // .parse --> new state + process: return tokens\n        // let tokens = md.parse(data, env)\n        let state = new md.core.State(data, md, env);\n        md.core.process(state);\n        let tokens = state.tokens;\n\n        //console.log('tokens:\\n', JSON.stringify(cleanTokensForDisplay(tokens), null, 2));\n\n        let typeMap = new Set();\n        traverseTokens(tokens, (t, idx, arr, depth) => {\n          typeMap.add(t.type);\n        });\n        console.log('token types:', typeMap);\n\n        if (0) {\n          let position = 0;\n          let prevToken = null;\n          traverseTokens(tokens, (t, idx, arr, depth) => {\n            if (!Number.isFinite(t.position)) {\n              console.error('erroneous token position:', t);\n              return;\n            }\n            if (!Number.isFinite(t.size)) {\n              console.error('erroneous token size:', t);\n              return;\n            }\n            if (t.position >= position) {\n              position = t.position;\n            } else {\n              console.warn('token position is dropping back / reversing:', { position, t, prevToken });\n            }\n            prevToken = t;\n          });\n        }\n\n        let content = md.renderer.render(tokens, md.options, env);\n\n        if (DEBUG) console.log('output:\\n', content);\n\n          // update the file record:\n        let el = allFiles.markdown.get(mdPath);\n        el.HtmlContent = content;\n\n        resolve(el);\n      }\n    );\n  });\n}\n\n\n\nasync function loadHTML(htmlPath, allFiles) {\n  console.log(`processing file: ${htmlPath}...`);\n\n  return new Promise((resolve, reject) => {\n    fs.readFile(\n      htmlPath,\n      {\n        encoding: 'utf8'\n      },\n      async (err, data) => {\n        if (err) {\n          reject(new Error(\n            `ERROR: read error ${err} for file ${htmlPath}`\n          ));\n          return;\n        }\n\n        if (DEBUG)          console.log('source:\\n', data);\n\n          // update the file record:\n        let el = allFiles.html.get(htmlPath);\n        el.HtmlContent = data;\n\n        resolve(el);\n      }\n    );\n  });\n}\n\n\nfunction cleanTokensForDisplay(tokens) {\n  let rv = [];\n  for (let i in tokens) {\n    let t = tokens[i];\n    t = cleanSingleTokenForDisplay(t);\n    if (t.children) {\n      t.children = cleanTokensForDisplay(t.children);\n    }\n    rv[i] = t;\n  }\n  return rv;\n}\n\nfunction cleanSingleTokenForDisplay(token) {\n  let rv = {};\n  for (let attr in token) {\n    if (token[attr] !== '' && token[attr] != null) {\n      rv[attr] = token[attr];\n    }\n  }\n  return rv;\n}\n\n// https://vuepress.vuejs.org/plugin/life-cycle.html#generated\nasync function mdGenerated(pagePaths) {\n  // cp docs-src/.nojekyll docs/ && cp docs-src/CNAME docs/\n  console.error('async generated HIT');\n\n  fs.writeFileSync(absDstPath('CNAME'), 'qiqqa.org\\n', 'utf8');\n\n  fs.writeFileSync(absDstPath('.nojekyll'), '');\n}\n\nfunction traverseTokens(tokens, cb, depth) {\n  depth = depth || 0;\n  for (let i = 0, len = tokens.length; i < len; i++) {\n    let t = tokens[i];\n    cb(t, i, tokens, depth);\n\n    if (t.children) {\n      traverseTokens(t.children, cb, depth + 1);\n    }\n  }\n}\n"],"names":["Symbol","iterator","_settle","pact","state","value","s","_Pact","v","o","bind","then","observer","prototype","onFulfilled","onRejected","result","callback","e","_this","_isSettledPact","thenable","_forTo","array","body","check","i","reject","_cycle","length","_forOf","target","_iteratorSymbol","step","next","done","return","_fixup","TypeError","values","push","loadHTML","htmlPath","allFiles","console","log","Promise","resolve","fs","readFile","encoding","err","data","Error","DEBUG","el","html","get","HtmlContent","compileMD","mdPath","md","env","getIncludeRootDir","options","startLine","endLine","dir","path","dirname","core","State","process","tokens","typeMap","Set","traverseTokens","t","idx","arr","depth","add","type","position","prevToken","Number","isFinite","error","size","warn","content","renderer","render","markdown","buildWebsite","opts","command","collectAllFiles","scanPath","join","config","docTreeBasedir","unixify","glob","nosort","nomount","nounique","nocase","nodir","nobrace","gitignore","processGlobResults","files","JSON","stringify","rv","Map","css","js","image","movie","misc","_","rv_mapping_def","rv_mapping","n","a","b","set","f","fname","basename","toLowerCase","ext","extname","nameLC","relativePath","relative","cat","paths","slice","minPathsCount","firstEntryPointPath","isAbsolute","cwd","normalize","entryStats","lstatSync","isDirectory","indexFile","indexFilePriority","sync","isFile","outputDirPath","endsWith","destinationPath","outputDirRelativePath","scan","MarkDown","xhtmlOut","breaks","langPrefix","linkify","highSecurity","typographer","quotes","highlight","mdPluginCollective","use_dirty_dozen","abbr","abbreviations","readOptionalTxtConfigFile","links","emphasis","include","root","getRootDir","wikilinks","postProcessPageName","myCustomPageNamePostprocessor","specRec","slot","key","entry","destinationRelPath","specRec2","assert","strictEqual","nomnom","require","pkg","gitignoreParser","script","option","flag","help","cmd","ex","message","exit","sanityCheck","nocommand","version","parse","replace","absSrcPath","rel","p","existsSync","src","readFileSync","lines","split","filter","l","trim","includes","map","parts","forEach","spec","deburr","cb","len","children"],"mappings":"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"}